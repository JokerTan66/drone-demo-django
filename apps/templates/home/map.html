{% extends "layouts/base.html" %}

{% block title %} Dashboard {% endblock %}

<!-- Specific Page CSS goes HERE  -->
{% block stylesheets %}
<style>
    #mapContainer {
        width: 100%;
        height: calc(66vh - 56px); /* 调整地图高度为页面高度的2/3，并减去卡片头部的高度 */
        border-radius: 15px; /* 设置四个角为圆角 */
        overflow: hidden;
    }
    .content {
        padding: 15px;
    }
    .card-container {
        display: flex;
        height: calc(33vh - 56px); /* 调整卡片高度为页面高度的1/3，并减去卡片头部的高度 */
        margin-top: 15px;
    }
    .card {
        margin-right: 15px;
        border-radius: 15px; /* 设置卡片圆角 */
        padding: 15px;
        overflow: hidden;
    }
    .card:last-child {
        margin-right: 0;
    }
    .card-2-5 {
        width: 40%; /* 设置宽度为 2/5 */
    }
    .card-1-5 {
        width: 20%; /* 设置宽度为 1/5 */
    }
    .control-panel, .control-panel-2 {
        display: grid;
        gap: 10px;
    }
    .control-panel {
        grid-template-columns: repeat(3, 1fr); /* 3列布局 */
    }
    .control-panel-2 {
        grid-template-columns: repeat(2, 1fr); /* 2列布局 */
    }
    .control-panel button, .control-panel-2 button {
        display: flex;
        align-items: center;
        justify-content: flex-start;
        background-color: #2c3e50;
        color: #ecf0f1;
        border: none;
        border-radius: 5px;
        padding: 10px 20px;
        font-size: 14px;
    }

    .control-panel button i, .control-panel-2 button i,.control-panel-3 button i{
        margin-right: 8px;
        flex-shrink: 0;
    }
    .control-panel button, .control-panel-2 button, .control-panel-2 .slider, .control-panel-2 .dropdown {
        background-color: #2c3e50;
        color: #ecf0f1;
        border: none;
        border-radius: 5px;
        padding: 20px;
        text-align: center;
        font-size: 14px;
    }
    .control-panel button:hover, .control-panel-2 button:hover, .control-panel-2 .slider:hover, .control-panel-2 .dropdown:hover {
        background-color: #34495e;
    }
    .direction-pad {
    display: grid;
    grid-template-rows: repeat(3, 1fr);
    grid-template-columns: repeat(3, 1fr);
    gap: 5px;
    padding: 20px;
    background-color: #2c3e50;
    border-radius: 10px;
    margin-bottom: 15px;
}
.control-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    color: #ecf0f1;
    font-size: 16px;
    height: 40px;
    width: 40px;
    background-color: #34495e;
    border-radius: 5px;
}
.control-btn.center {
    background-color: #1abc9c;
}
.slider {
    margin: 15px 0;
}
.slider input {
    width: 100%;
}
.bottom-controls {
    display: flex;
    justify-content: space-between;
}
.bottom-controls button {
    flex: 1;
    margin: 5px;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: #2c3e50;
    color: #ecf0f1;
    border: none;
    border-radius: 5px;
    padding: 10px;
    font-size: 14px;
}
.bottom-controls button i {
    margin-right: 8px;
    flex-shrink: 0;
}
.bottom-controls button:hover {
    background-color: #34495e;
}
    .bottom-controls {
        display: flex;
        justify-content: space-between;
    }
    .bottom-controls button {
        flex: 1;
        margin: 5px;
    }
</style>
{% endblock stylesheets %}

{% block content %}
<div class="content">
    <div class="row">
        <div class="col-md-12">
            <div class="card-body">
                <div id="mapContainer"></div>
            </div>
        </div>
    </div>
    <div class="card-container">
        <div class="card card-2-5">
            <div class="card-header">
                飞行控制
            </div>
            <div class="card-body">
                <div class="control-panel">
                    <button><i class="fas fa-play"></i><span>开始作业</span></button>
                    <button><i class="fas fa-arrow-up"></i><span>起飞</span></button>
                    <button><i class="fas fa-pause"></i><span>暂停</span></button>
                    <button><i class="fas fa-undo"></i><span>返航</span></button>
                    <button><i class="fas fa-stop"></i><span>停止</span></button>
                    <button><i class="fas fa-arrow-down"></i><span>迫降</span></button>
                    <button><i class="fas fa-toggle-on"></i><span>开启摇杆</span></button>
                    <button><i class="fas fa-toggle-off"></i><span>关闭摇杆</span></button>
                </div>
            </div>
        </div>
        <div class="card card-2-5">
            <div class="card-header">
                载荷控制
            </div>
            <div class="card-body">
            </div>
        </div>
        <div class="card card-1-5">
            <div class="card-header">
                其他
            </div>
            <div class="card-body">
                <div class="control-panel">
                    <button><i class="fas fa-video"></i><span>视频快拼</span></button>
                    <button><i class="fas fa-link"></i><span>网络链路</span></button>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock content %}

<!-- Specific Page JS goes HERE  -->
{% block javascripts %}
<script type="text/javascript" src="https://webapi.amap.com/maps?v=1.4.15&key=你的高德地图API密钥"></script>
<script type="text/javascript">
    var map = new AMap.Map('mapContainer', {
        resizeEnable: true,
        center: [119.24547, 32.26518], // 地图中心点
        zoom: 15, // 地图缩放级别
        mapStyle: 'amap://styles/dark' // 深色主题样式
    });

    // 创建一个标记，并设置图标为红色
    var marker = new AMap.Marker({
        position: new AMap.LngLat(119.24547, 32.26518), // 标记的经纬度
        title: '指定位置',
        icon: new AMap.Icon({
            size: new AMap.Size(25, 34), // 图标大小
            image: 'https://webapi.amap.com/theme/v1.3/markers/n/mark_r.png' // 红色图标的URL
        })
    });

    // 将标记添加到地图上
    map.add(marker);

    // 添加工具栏控件
    AMap.plugin(['AMap.ToolBar'], function() {
        var toolBar = new AMap.ToolBar();
        map.addControl(toolBar);
    });

    // 添加比例尺控件
    AMap.plugin(['AMap.Scale'], function() {
        var scale = new AMap.Scale();
        map.addControl(scale);
    });

    // 添加地图类型切换控件并设置默认类型为卫星图
    AMap.plugin(['AMap.MapType'], function() {
        var mapType = new AMap.MapType({
            defaultType: 1 // 0表示默认标准图，1表示卫星图
        });
        map.addControl(mapType);
    });

    // 设置默认显示为卫星地图
    map.setLayers([
        new AMap.TileLayer.Satellite()
    ]);
</script>
{% endblock javascripts %}